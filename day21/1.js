const test = `...........
.....###.#.
.###.##..#.
..#.#...#..
....#.#....
.##..S####.
.##..#...#.
.......##..
.##.#.####.
.##..##.##.
...........`;

const raw = `...................................................................................................................................
................#..#.....#...#........................#...............#................#..........#.......#.....#......#.....#.....
..#..........#...#......#..#.........##.....#....#.....................................#.......#.#........#...#...#.....#..........
....#......##.......#..................#...#......#.............................#..#....#..........#...............................
..................................#...........#...##......................#.#.......##....................#.................#......
..##.#..#.........#.............#.#.....#..................................#................#.......................#..#........#..
...........#.#....#.....#...#..................................#............#......#..#.........#..#....#.......................#..
........#..............#.....#......#...#...........................#...................#.#....#..#........#...#...................
...#......#.....##.............................#.#.......................................................#....#..#..#..............
..#..#...#.....#..#....................#.#...#................#.......................#........#.......#..#........................
...#.#.........#...............#.#.....#.........##..........###.....#.........#.........................#......#..#...#...........
.................#.......##...#........#..................#......................#........#..#.......#............#.#....#.........
.....##........#.............#...#.............................#........##......................#....#..................#.....#....
...................#...#...#......#.#.#...................#.....#.........#..........................#..........#..#.#......#..#.#.
...#.##..#..............................#............................#.................#.......#...#.......#........#...........#..
...#................#....#........................................#.....#............................#..#....#....#.........#......
....#.#.....#............#....#...#.........................#.#...#....#.....#...................#.....##....#.......#...........#.
.#..................##..#.#...............#...............#.#..#...#..#...#.#...........#.#................................#...###.
...............#..........#.....#..#.....#.........##..........##.....#.......##..........#...#..............................#.....
.#..#..##.#.........................##.....................#.................##...............#.#......#.......#......#............
.........##..#.#...............##....................#...#............#.....................##......##....#..........#........#....
.............#...#....#.#..........#.....................#...##.....#.........#...........#.#.............#.#.............##.......
.#.#....#....................#..#.......................#....##.........#......#.........................................#.........
.........#......#..##..#..............................#.......#.....#..............#.................#......#..##...........#......
.#...#..........#..........#....##..................................#.#.......#.................#.#.........#.........#......#.....
..........#....#.....#...................................#............#.....#.........#..................#......#..#....#.....#....
.........#.....................##...........#.#.........#.#......................#.....#........#...#...........##.................
..#....#.........#.............#...........#............#.#....##..........#...#.#..........................#.#....................
....#...........#......###....................#....#.....#..#.....#..#.....#......................##...#.....#..#.....#....#.......
...........#....#...#...#.........................#.......#..#...........#.....#..#.................#..........................#...
........#.......#.#.#..#...............#.#.............................#...#..............#...........##..............#.#..........
..................................................#...........#.....#............#.....................#.....#....###..........#...
.#.#.......#.....#...................#...................#.#..................#....#..........................#....................
..........#....#......#...................#...#............................................................#............#.#..#.#...
..................#..#.....#..........#.#.........................#.....................#.............................#...#........
.........#................#............###.....................#.....#...........#...#....#...............#.........#...........#..
.....#.#.............#..............#....##.....###..##........#..............#............#.......................................
..............#...#..#..........#....#........#........#.......#...............#........#...#.#...#.........#......#......#..#.....
........#........#...............#...#..#...#......##..........#..................#...............#.........#.....#.......#....##..
.........#...##................#.........#...#...........#.....#...#......#....#.#............................#....................
...................................#.............#.......................................#..........##.........#...#.##...#....#...
.............#.............................##.............#.................................##...#....#.................#.....#.#..
.........#......#..............#......#........#..........#..##......#.................#.......................#.......#..#....#...
.....#.#......#...........#...........#....................#.#.....#................#.........#......#.............................
...............#........................................#....#.....#.....#.........#..........#...#....#...........................
.#.............................####.........##.#.#....#.#.......#...##....#............#.#...#.....................#..#............
......#..........................#.....#............................#.#....##......#........#...........#..........................
.......#.#..#.#.........#................#........#.....#.......#....#.......#.#......................###................#.........
.#........##..........#......#......#.......#...#...#.......#.....#................#.......#..#......#.......#.................#...
..............................................#...#.......................#.....#..............##..#..#.....#......................
...................#......#....................#.........#....#....#..#.#.........##....#........#.................................
.....................#..#..........##..............#.....#.#........#................#......................................#......
..#...............#...........#................#.......#...............#..#...#.....#.............#..##....#...............#..#....
...#.#..#........#.#...........##.............#...#......##..#.....#......#.....#..#.......#.......#...#.##...##..........#........
..#..................##....................#.......................................#.....#......#.....###.....#.............#......
..#............#...........#.......#.#................##.....#.##...............#.#..#.................#..#........#...............
..............#..................#........#.........#.......#................#........#........#.....#.#...........#...............
..................#............#.....#...#.#...#...#......#.....#.....#....#..........#........................................#...
.#.........#........#........#.............#...#..#...#...................#......#.................#...#.#.........................
..............#..........##..#....#.....#.......#....#..#..............#..#..............#.................#....#..................
..........#...#...##........#......#.......###...##..........#...........................#...............#.##.........#............
................##..#.............#......#...##......#.....#..............................#.......##.........#..#....#...##........
.................#.......#.......#..#...##...#.......#.....#............#.................##........#.......#.##..........#........
........#....................##.......#.....#..............#.............#.......#...#...........###.............#..#......#.......
..............##............#.#..........##..............#.....#.....#..##.............##..............#.#.........................
.................................................................S.................................................................
..........#.........#.......##...#.#.......#.#.......#...#........##........##...............#..#..#.#..#............##.##.........
........#...............##.........#.........#.#........#.#.#............##....#.......#...#.##...#...#...#........#.....##........
..........#.........................#...#....#.............##..........#..............#.##.........#............#..................
...........#.#................##..........................#..#...............###..#.............#...#..#.........##................
...................................##.............#....#..#.#......#...##.....#..........#.#..........#...........#..............#.
........................#......##.....................#..#...........#............#.........#...................#....#.#...........
...............#....................................#....................................#......#...............#......#...........
..#.............................###...........#........#..#....#....#..#....#..........#....#...#..................................
.................#........................#.......#.#..#.....................#..........##..#....#.#........#.#....................
.....................#...............................................#..#.........#..#.......#.................#...................
.......#........#..#.............#..#......###...#....#................#.....##....#.#..............#.............#.........#.#..#.
.#...#...........#.#..#....#.....#....##..............#...#...........#.....................#.....#..........#.....................
.........#............#.....#.........#.....#...#..#..#.....................#..#..............##..............#....................
.#..#..#....................#..##...#.........#............................#........#.....#.............#.#.............#.#...#....
..#.#.....##..........#.##............#......#..#..............#....#..............#......#..#..#.......#...............#..........
.....................#..........#...##.............#.............................#.....#.....#............#.#..............#.......
..........##............#............#..#..#.........#.#............#..#.................#.......#.....#......................#....
.....#..................#.....#........##.................#.....#....#...#................#....#......#.....#............#....#....
.....#..#.....#..........#...#..#....#....#........#..#..#.....#....#..#..........#............#...##.#...#..............#.......#.
....#...#......#..........#.......#....#........#..#..#.......#.#.................##...#...#.#.#.........#......................#..
..................................#.....#..##...#............#..#..#..........#....#...............#.....................#..#...#..
..#.......#...#.................#...#..............##..................#............#......#........................#........#.....
..#.......#.................#.......#................#..#.#.#......#..................#........#...#........................#..##..
...........#.............................#....###..................#......#.....#.........#...#................#.......#...#.#.....
....#...#.......#................##....#.#..#..#...#..................##....#.................#................##............##....
....................#...............##............##..........#.......#........#........#.......................##..........#......
...#.....#.......#.................#........#.....................#..##........#......................................#......#..#..
.#.....................................##.................#.#.....#......##.#..##................................#...........#.....
................#........#............#...................#........##...................................................#.##.......
.........................#.............#.#..##..#......#.#........#...............#....##...................#.....#................
.....#...#........#.#....................#.#...#..#...#......#......#...................###................#.....#.#...#.......#...
.....#.....................#............#....#.#..#.##...............##.........#........................#.........#....#..........
............#..............#.#.......#...........#....................#......................#.......................#...#.........
..#....###.....##............##................###.#....................#.....#....#..................#..##..#.#...#.........#.....
......##.......#.................................#..#..#.....#..#.#.#.#....#..##.....#.....#.......................#.....#.#..###..
.#.......................#...................#.##..............#...............#..................#.#........#...........#..#......
........#........#..........................#...#..##.................#..#..#.##.......#..............#.#.........#....##..........
.....#...#............##..#......##..............##.###....................#............#.......#............................#.....
........#.#.........##...#.#.....#............#.............#............#......#...............#.#..........................#..##.
...#..#.#...............#....#..##..............#............#.........##...........#.........#...........#...#....#...........#...
.##.......#..##......................................##................#.....#.....................................................
...##.......#......#...#............................................#...#.........................#.#.......#.#.......#....##..#...
..#........#...#.#.#.#.............#...#...............#...............#...................#....#....#...#.#.....#............#....
........................#........#......#.........#......#..........................................#....#.......#..........#......
........#...........#....#..........#.................#......#..#...#.......#...#.....................................#........#...
...#.#..#.#.#....##...#........#......................#....##......#......#...................................#...#.........#......
..#.............#.......#..............#................#....#........#.....##................#.#....#...#.#....#......#..#........
........#...................#...#...........................#.........................#.....#........#......................#.#..#.
.............#....##.....#.#........#......................#..#....#.....#...............#.....#......#.....#....#..#..........#...
..#....#.....#.#.#...........#.#..........#.................#..#...#..................#..........................#.#.....#..#......
...#.....................#.......#...#...#............................##...................#.....#...#.................#...........
..#.....#.............#......##..............##...................#......#.........................##.......#..........#...........
...#................#....#.##.........................................###...........#.#.....#..#...............#...##..............
.......#............#........#...............##..#........................................#.#...........#.....#...#..#.......#.....
......#...................#...##.............................#....#....#........#........#....#........##..........#.........#...#.
..#.#.#......##..#.#.##...........#.#........#....................#.............................................##...#.#.##........
......#.................##..#.#......#.............##..................................#.............#....##..........#............
.......#.#...#...........#.........................#...........#................#............##....#.........#.................#...
....#....##.........#.........#..........##.....##..............#.......................#.....#.#.#.......#...#...#.............#..
...#....#....#.............#...............#....#....###...................#........#.............#.....#..#.........#.....#....#..
....#..............................#..#..........#.................................#.#.................................#..#.....#..
.......###...........................#.................#.#.........................................#.....#...#.........##..........
...........#....#..........#..#..............##..........#...................#.#............#.......#.#..#.#....#.........#......#.
.....#..........###..#.....#.#.........#.............####..#.............#..#.......#.............#...#..........#......#.#........
...................................................................................................................................`

const input = raw.split("\n").map((row) => row.split(""));

let walkers = [];
let walkersNext = [];
input.find((row, r) =>
  row.find((cell, c) => {
    if (cell === "S") {
      walkers.push([r, c]);
    }
  })
);

function checkTile(tile) {
  const [r, c] = tile;
  if (r < 0 || r > input.length - 1 || c < 0 || c > input[0].length - 1) {
    return;
  }
  const cell = input[r][c];
  if (cell) {
    if (cell === "." || cell === "S") {
      input[r][c] = "X";
      walkersNext.push([r, c]);
    }
  }
}

function walk(walker, direction) {
  const [r, c] = walker;
  input[r][c] = ".";
  switch (direction) {
    case "up":
      checkTile([r - 1, c], walker);
    case "down":
      checkTile([r + 1, c], walker);
    case "left":
      checkTile([r, c - 1], walker);
    case "right":
      checkTile([r, c + 1], walker);
  }
}

function walkAll() {
  walkers.forEach((walker) => {
    walk(walker, "up");
    walk(walker, "down");
    walk(walker, "left");
    walk(walker, "right");
  });
  walkers = walkersNext;
  walkersNext = [];
}

for (let i = 0; i < 64; i++) {
  walkAll();
}

const out = input.reduce((acc, row) => {
  row.forEach((cell) => {
    if (cell === "X") {
      acc++;
    }
  });
  return acc;
}, 0);

console.log(out);



console.log(input.map((row) => row.join("")).join("\n"));


