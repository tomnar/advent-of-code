const test = `#.##..##.
..#.##.#.
##......#
##......#
..#.##.#.
..##..##.
#.#.##.#.

#...##..#
#....#..#
..##..###
#####.##.
#####.##.
..##..###
#....#..#`;

const raw = `#.#.##..#.#..
.##.##...#.##
.######.....#
#....#..###..
#########.#..
...##.#.##...
#..#.###.####
#..#.###.####
...##.#.##...

###.###..#....#..
#....#.#.#.#####.
#.#....#.....###.
.###.##..######.#
.....#....#.##.##
.....#....#.##.##
.###.##..######.#
#.#....#.....###.
##...#.#.#.#####.
###.###..#....#..
....#...#.#......
..##.##.#.###.#..
..##.##.#.###.#..

#..##...#
#..##.#.#
.....####
.....##..
.##.#..##
#..##.#..
####..##.
....##..#
#..#.####
#..#.###.
#..######

###.####.#.##
..########...
###......####
...######....
.#.##..##.#..
.##.####.##..
.#.#....#.#..
###..##..####
###..##..####
#.##.##.##.##
..########...
##........###
...######....

##..###..#.####
.........#.##.#
##...#...##..##
##..##.##..##..
##.###.##.####.
......##..####.
###.###.#......
...#..###..##..
....#..########
..##.###.#.##.#
###.###..#.##.#
##.##.###.#..#.
...#...##......
##.......#.##.#
..#####...####.
...##.#...#..#.
##.####.#######

...####...###
####..####.#.
..........#..
..#....#..###
####..####.##
..######..###
##......####.
.#.#..#.#.#.#
...#..#...#..

##..#.##..###
....##...#.##
##.....##..##
...#..##..###
####..##..#..
..##..##.#.#.
...##.#...###

#.##..#.##.
###.#....##
.#.##..####
.#.#.......
#..#..##..#
#..#..##..#
.#.#.......
.#.##..####
###.#....##
#.##..#.##.
.#.####..#.
#.#####.###
#.#####.###
.#.####..#.
#.##..#.#..

.#..#..#.......
#......###..##.
..###.#...#..#.
#.#.#...##.#..#
######..#.##.#.
###...#..###.#.
###...#..###...
######..#.##.#.
#.#.#...##.#..#
..###.#...#..#.
#......###..##.
.#..#..#.......
.#..#..#.......

.##..##...#....
.##.##.#.......
.#.#..#.###.##.
.###.#........#
#.####..##.##.#
...#......##.#.
#....###.#.###.
#.....##.#.###.
...#......##.#.
#.####..##.##.#
.###.#........#
.#.#..#.###.##.
.##.##.#.......
.##..##...#....
...##..#.###..#
#.#.##.####..##
#.#.##.####..##

#..###....###..##
.##.#......#.##..
.#.##.#..#.####..
####.#....#.#####
##..##....##..###
#..#.######.#..##
##.###.##.###.###
.##..#....#..##..
.###.######.###..
###..#.##.#..####
##.####..####.###

#.##..##...
.##..#.#..#
.##..#.#.##
#.##..##...
#..#####.##
....#.##.##
#.##.##..##
#.#..##.###
....#....##
##.#.#..##.
..#.#....##
.##..######
##..#.#.##.
##..#.#.##.
.##..######
..#.#....##
##.#.#..##.

.##.#.#.......#
.####.#.......#
.....#.####....
.....######.##.
.#....#..#####.
#.###....#..#..
#..###...#.##.#
####..#..#.#..#
####..#..#.#..#

####.###..###
#.#.##..##..#
..#.#..#..#..
.##.##.#..#.#
#####...#....
.#.....####..
.#.....####..

#.#..#.#...
#.####.#...
#......#.##
..#..#.....
.######....
########...
##....#####
########..#
#......#.##

........###
.##.#..#...
#....#.#...
..####.##..
....#..#...
...#...#.##
.###..###..
.###..###..
...#.....##

..#..#.#.
..#..#.#.
###.....#
#..#.#...
#...##.##
.##.##.##
##.##.##.
.#.#..##.
.###..##.

#........##..
##.####.####.
#..####..##..
.##.....#..#.
.#.####.#..#.
.##.##.##..##
.#......#..#.
#.##..##.##.#
.#......#..#.
#..####..##..
.########..##
...####......
###.##.######
####..#######
##.####.####.
###.##.######
..######....#

.......#...##
######..#....
.##....##..##
###..#.###...
.....#...#.##
#..#..#......
.##.#.#######
......#.#####
#..###..##...
.....##.#.###
#..#####...##
#..#..###.#..
.##.#.#......
#..##.###....
.##..##..##..

..##.#..#..#..#..
.#.....#.##.##.##
.#.###..##.####.#
##..#.###...##...
..##.#..##..##..#
..###.##.#.......
.#.#..#....####..
#..##.#####.##.##
....###.####..###
.#..####..#.##.#.
.#..##...#.#..#.#
.#....##.###..###
.#....##.###..###
.#..##...#.#..#.#
.#..####..#.##.#.
....###.####..###
#..##.#####.##.##

.#####..#.#......
.....###..#.#####
####.#.#.##.##..#
.#.###...###.####
.#.##.#.###..#..#
.#####.#.#.#.....
##....##..##..##.
##....##..##..##.
.#####.#.#.#.....
.#.##.#.###..#..#
.#.###...#.#.####

#..#.##
####.##
#..##..
##.##..
#####..
.##.#..
.....##

#.##.##
##..#..
..##...
..##...
##..#..
#.#..##
..#####
.#.#...
#.#.#..
.####..
##.....
.#.####
###..##
##...##
.#..###

#.####.#...#.
..#..#..###.#
.##..##..#...
#..##..#.#.#.
........#.#..
...##...###.#
.#.##.#..#..#
##....##.##..
..####....#.#
########....#
###..###..###
.#....#..#.##
#.####.#..#.#
#.####.#.##.#
.#....#..#.##

####......###
##..#.###..#.
#........#...
..#.#.###...#
......#######
#..#....###..
###..#.....#.
###..#.#...#.
#..#....###..
......#######
..#.#.###...#
#........#...
##..#.###..#.
####......###
####......###

#..#....#.#
#.#.##..##.
#.#..#.####
#.#..#.####
..#.##..##.
#..##......
###...###.#
###...#####
###...#####
###...###.#
#..##......
..#.##..##.
#.#..#.####
#.#..#.####
#.#.##..##.

#####.#..####..
#....####.##.##
#...##.........
.#..#.###.##.##
##.#..#..#..#..
...##.####..###
#..#.##..####..
..#.#...#.##.#.
#.##.##########

#..###.#.#.#.#..#
.##.#.##..#######
#####...##..##..#
#.##.##.##.##....
#####.#...#...##.
####.#.###.######
.##..#.###..#####

####....#
####...#.
#..##.#..
....#..##
.##...#..
.##...#..
....#..##
#..##.#..
####...#.
####....#
.##..#.#.
.#..###..
#..#.#...

.#...##.#..####.#
...##...###.....#
#.#.###..##..#..#
#.#.###..##..#..#
...##...###.....#
.#...##.#..####.#
#.#.####.....####
.#..#..###.##.##.
#.#.#..#...#.#...
#.#.#..#.#.#.#...
.#..#..###.##.##.
#.#.####.....####
.#...##.#..####.#

##.#.####.#...#
##.#.####.#...#
...#..##..#..#.
.#.####.##...#.
..##.####..####
...#..####.#...
....###..#.##.#
.#..#####.#..#.
.#####..#....##
.#####..#....##
.#..#####.#..#.
....###..#.##.#
...#..######...
..##.####..####
.#.####.##...#.
...#..##..#..#.
##.#.####.#...#

#.#.##.#.#..#
.##.##.##....
.###..###.##.
#.#.##.#.####
....##.......
####..####..#
###....#.####

.###....###..
#..#....#..##
#..#....#..##
..#.#..#.#...
#.######.#.##
.##.#..#.##..
.#........#..
.....##......
#.##.##.##.##
...######....
.###.##.###..
...######....
#....##....##

#.#######
#.#######
...######
.#..#.##.
.##.#..#.
.####..##
...#....#

###..###.
...####..
#.###.#.#
#.###.#.#
...####..
###..###.
#.#.##..#
..#..#.##
..#..#.##
#.#.##..#
###..###.
...#.##..
#.###.#.#

#.##..#.....##..#
.#..#.......##..#
.#####..#.#.#.##.
#.####...###..##.
#.####...###..##.
.#####..#.#.#.##.
.#..#.......##..#
#.##..#.....##..#
##.###....#######
..##......###.##.
###.#..##.....##.
#.###......##.##.
##.##.#......####
..#######...##..#
##..##.##...##.##
##..#.##.##..#..#
.....###..#.#####

.##...##....#.#
#####.#....####
#..##..##.###.#
.......#..##..#
#####.#.##..###
.##..#..###....
.....#.#.##.###
#..####..##.#.#
.##.#....#.###.
.##.#....#.###.
#..####..##.#.#
.....#.#.##.###
.##..#..###....
#####.#.##..###
.......#.###..#
#..##..##.###.#
#####.#....####

..##....#.....#
#.#.##.###.#..#
.###..#..#.##..
.###..#..#.##..
#.#.##.#.#.#..#
..##....#.....#
.##.###..#...#.
#####..###.###.
..###...#...#..
.##.###.#......
.#.##.#...#####
.#.##.#...#####
.##.###.#......

######..##.#.#.##
######..####.#.##
#.##.##.##.#.#..#
#....#...##....#.
##..##...#..##..#
##..###....###.##
#....#.##...##.##
.####.##.#.#..###
.......#.##.##.##
.#..#.#..##.#..##
.#..#..#.##..##..
..##.....##...###
#.##.#.....######
#######..#....##.
#.##.##.#...#####
##..###......#.##
#....##..###.##.#

##..##.##..
##..##.#...
......#.##.
.#..#.#..##
.#..#.#...#
#######...#
..##..#.###
........##.
.......##.#
.........#.
.........#.
..##...##.#
........##.

####..####.#....#
..#....#....####.
...####...#.#..#.
.##....##....##.#
#.######.###.##.#
...........#....#
#.#.##.#.###....#
#..#..#..###....#
.#......#.###..##
#.######.###.##.#
.###..###.###..##

.#..#.#
###..#.
..###.#
..###.#
###..#.
....#.#
#.#.###
....##.
#..#.#.
##.##.#
#....##
.#....#
.#....#

#.##.#...##...#
#.##.#.#.##...#
##.###....#...#
#..#.##.#....#.
##...##.##.#..#
#....#.#.##..##
.####....##.##.
.####......#...
.####......#...

.####.#....#..###
#..##...##.###...
.#.##......##....
#.##.###...##..##
#..#.###.##.....#
#..##.#.##.##.###
..#..#.#..##.####
.#..#..#.########
...#..####.#...##
###.....#.##.#.##
.#.#.....#.#.#...
##.....##.....###
..####...##.#.###
..##.#..#.##..#..
.#.....#...###...
.#.....#...###...
..##.#..#.##..#..

#.#.#..
#.#####
....#..
####.#.
##.....
..##...
##.....
...#.##
...#.##

..#....
...#.#.
###.###
###.###
...#.#.
..#....
.#.###.
#.....#
#.#...#
.#.###.
..#....
...#.#.
###.###

..#..#.#.#...#.##
.#.##..##..#.#..#
..##.##.....#..##
#.##...##...###..
........#####....
##.#####.#.#.##.#
.###..#.###.##.##
.###..#.###.#..##
##.#####.#.#.##.#
#..###..#...###..
#...##....##.##.#
#...##....##.##.#
#..###..#...###..
##.#####.#.#.##.#
.###..#.###.#..##
.###..#.###.##.##
##.#####.#.#.##.#

.#.###.
..####.
.###.#.
.###.#.
.#####.
.#.###.
..####.
######.
###..#.
..#.#..
.##.##.
#.##..#
#.##..#
.##.##.
..#.#..
###..#.
######.

......####...
.........#.#.
.......#.#.#.
......####...
....##..##...
##..#.....###
##..##....#..
######.###...
##.#..####.##
...#..#....##
##.##..####.#
##...#.....#.
####.##.###.#

######.
..####.
..#...#
..#.#..
....##.
...##.#
...##.#
....##.
..#.#.#
..#...#
..####.
######.
###.#..
.....##
...#..#
##..#..
...#...

.###......######.
...####....#..#..
##.#.##.##......#
.#.#....#..#..#..
##.#.....###..###
#..###...........
..#...###.##..##.
.######...#....#.
#..#.....##.##.##
#....#.#.##....##
#.###.#...##..##.
..##.##..#..##..#
..##.#..#.#.##.#.
.##.#.##.#.####.#
..#........#..#..
..###...#..####..
..###.#.#..####..

.#....#....
###..######
..####..##.
...##...##.
.######.##.
##....#####
###..######
##.##.#####
#####.##..#
.#....#.##.
###..######

####..####..##.
....#..#..##.#.
####.###..###..
#..###.##.####.
.##.####.#..#.#
....#..###.#.##
...###..#....#.
.....#...#..#..
.....#...#..#..

#..#.#..#.#
....####.#.
#..##.#####
#..##.#####
....####.#.
#..#.#.##.#
.##.#.#.##.

...##........
#..##..#..#..
..####......#
#.#..#.#..#.#
.#....#....#.
#.####.#..#.#
##.##.##..##.
###########.#
.#.##.#.##.#.
###..###..###
#......####..
########..###
.######.##.##

#.#..#.#....#
..#..#...##..
.#.##.#..#..#
##....##....#
######.##..#.
..####....###
#.#..#.#....#
.##..##..###.
#.#..#.#...#.
.#.##.#.#..#.
#......##...#
#......##...#
.#.##.#.#..#.
#.#..#.#...#.
.##..##..###.

.#....####....#..
.#.####..####.#..
#######..######..
##.#...##...#.###
##...######...###
.##..#....#..##..
.#....#..#....#..
#...##....##...##
....##....##.....

##....##.#.####.#
##.####.###....##
..##..##.##.##.##
...##.#....####..
#.#.#.#...#.##.#.
##...#.##.#.##.#.
..###.##.##.##.##
###..##..........
..##..####.#..#.#
...####.....##...
..#.##...#.#..#.#
..##.#####.####.#
..#...###..#..#..

##.##.#####...#.#
##.##.###....##.#
..####........#.#
.#..#.#.##...#..#
..####.....#.##..
........##..##.##
#.####.##....#.##
##.##.#########..
##.##.#########..

####.#...#...
.####..#..###
#....#.#....#
..##......#.#
..##......#.#
#....#.#....#
.####..#..###
####.##..#...
###..#.####..
.###.#...#...
.#...####.##.
.###..##..###
##.....#.##..
#.####..#.###
#.##.#####..#
#.#.#.....#..
#.#.#.....#..

###.#..
#....##
#.##...
#.#.#..
..#####
.####..
####.#.
.###...
.###...
#..####
.#.#...
.#.#...
#..####

....#####....
#..###.######
####...##...#
####..##..##.
.....##.#...#
#####..#..###
#####..##.###
.....##.#...#
####..##..##.
####...##...#
#..###.######

...#....#.....#
...#....#....##
.#.##..##.#.##.
.##..##..##.##.
##........##.#.
.#.#.##.#.#....
.#..#..#..#.#..
##..####..###..
#..#....#..#.##
..##....##..#.#
###..##..###.#.

...###.####..##
.##.#....#.####
###..###..##..#
##.#.#.#..###.#
##.#.#.#..##..#
#....#.#...#...
.##..##..###.##
#....#.###.#...
##.##.#..#####.
##.##.#..#####.
#....#.###.#...
.##..##..###.##
#....#.#...#...
##.#.#.#..##..#
##.#.#.#..###.#

#####.####...####
###.#...###..###.
..###.##...##...#
##.#####.######.#
..#..##.#.####.#.
##.##...#.####.#.
######..##.##.##.

....##..#
####.#..#
.##.#.##.
..#.##..#
.##.#.##.
....#####
#..#.####
....#####
######..#
#..#.####
#..##.##.
#..##....
####.####

.##..##.#####.#
.#####.....#.##
###.##...##...#
..##..#.###.###
..##..#.###.###
###.##...##...#
.#####.....#.##
.##..##.#####.#
#......##.####.
...##.####..#.#
##..#...##.##.#
###..#..##.....
..###...#.###.#
..###...#.###.#
###.....##.....

......#.....##.
......#..###.##
#.##.#.##.#....
##..##.#.#.####
......#...#.#..
.......##.#####
##########.#...
######..#.#.#..
##..########.##
.......##......
..##..#...##...
.####...#.##...
##..##..#...#..
.#..#.#.#..#.##
#######..###...

#..##..##..#.##
##..#..#..####.
##..#..#..####.
#..##..##..#.##
#...####...#...
#..........#.##
.##########.#..
.##.#..#.##..##
##.##..##.#####
##..#..#..####.
#.###..#.#.###.
.###....###..##
###..##..####.#
###.####.####..
#..#.##.#..##..
#....##....##.#
..#.#..#.#...#.

.....####
##..#.##.
##..#.##.
..#######
...#.####
##.#..##.
#####....
.....###.
..#..#..#
...######
..#.#....
##..##..#
##....##.
####.####
#####.##.
##..#....
...#.....

#......####...##.
#.####.#.....#.##
#########.#..#..#
#..##..#...##..##
#..##..#...##..##
#########.#..#..#
#.####.#.....#.##
#......####...##.
#..##..#..#.##.#.
.##..##.##.##..##
..#..#..###.#####
#.####.#.###..#..
########.#####.##
##.##.##....####.
........###...#.#
#..##..#..#.#.###
###.####.####.###

####.##...##.#.#.
.........##...###
##.###.#..###.#..
..##........###..
#######...#.....#
###...#.##.##.#..
###...####.##.#..

##.#..#.####.
#..#..#..##..
.###..###..##
.########..#.
###....######
....##.......
#..#..#..##..
#.#....#.##.#
..#.##.#....#

###....##....
...##########
.##.##....##.
#...##....##.
...##########
#..#..####..#
.#.....##....
.##.##.##.##.
.#.#..#..#..#
..#.##.##.##.
.#.#.######.#

.#..##...######.#
#.#..#..####...##
#####..#.##..#.#.
#####..#.##..#.#.
#.#..#..####...##
.#..##...######.#
#.##.#....#....#.
###.#.##.#####...
.#.#####..#..##.#
##...##.###.##...
#..#..###..#..#..
#..#..###..#..#..
##...##.###.##...
.#.#####..#..##.#
###.#.##.#####...
#.##.#....#....#.
.#..##...#####..#

#....##......
#.....#......
..#.#....##..
#...#..##..##
.#.#.###.##.#
#....###....#
.###.########
#........##..
#.####.......
##..####.##.#
.###...#.##.#

###.#.#
######.
######.
###.#.#
.####..
..##.##
..#.##.
###.##.
.#..###
#.#.#..
..#.#.#
##..###
##..###
..#.#.#
#...#..
.#..###
###.##.

#######........#.
########.#.#....#
......#..#...#.##
###...####....#..
.##.#..#.##.#.#.#
#..#.#....#.##.#.
####.#####..###..
....##.#..#...#..
#####.#.###..##..
#####.#.###..##..
....##.#..#...#..

#####...##...####
..###..#..#..###.
..#.######.###.#.
#.#.###....###.#.
.##..#..##..#..##
..#....####....#.
####..#.##.#..###
#...#.######.#...
###............##
#.##.#..##..#.##.
#.##.#..##..#.##.
###............##
#...#.######.#...
####..#.##.#..###
..#....####....#.

##...##.#.####.
##...#####....#
.#.#...########
###..#.#.#....#
..#..#####....#
##........#..#.
.#...........#.
#####.###......
..######.#.##.#
.###.#.#.#.##.#
.###.#.##.####.
...###..###..##
#...#.###.####.
#.##...#.#....#
#.##...#.#....#
#...#.###.####.
...###..###..##

#.#.#.###
.#....#..
..####..#
#.###..##
.#.##..##
.#....###
.#....###

#####.#.#..#..#..
#######.#..#..#..
.##..#...##..##..
#..#.#.#..##.#...
...#.#.##.#.#....
#..####.#....#.##
#####..#.#....#..
#.######.#..###..
.##.....##..#.#..
..#.##.##.....###
#####.#.##..#....
.....#...#.#.##..
###.#.#.####.....
#..####...#..#...
####.###...#..###

#..##.#
.##..##
#..###.
.....##
.##..##
.##..#.
.....##

###.####.##
##.#....#.#
#####..####
...######..
##.##..##.#
..##....##.
###.#######
####.##.###
##..####..#
..###..###.
##..#..#..#

.#...#..#...#....
###.#....#.####.#
.#.##....##.#.##.
####.#..#.####..#
##.#......#.##..#
#.##......##.#..#
####.####.#######
...#.#..#.#......
##.##.##.##.##..#
...########......
#.##.####.##.#..#
#..##....##..#..#
#............####

.###.#...##
#.#.####.##
###...####.
..##.#...#.
#.##.#...#.
#..##.#...#
#..##.#...#
#.##.#...#.
..##.#...#.

..##.#..#
#...#.#.#
.###.#.#.
##...###.
.#...###.
.###.#.#.
#...#.#.#
..##.#..#
..#.#..#.
###....#.
###....#.

#####...###
.##..#.###.
#..####.#..
...##.....#
#.#.####.##
#.#.####.##
...##.....#
#..####.#..
.#...#.###.
#####...###
#####...###

#..####..
.......##
#.##..###
.....#...
......#..
....#....
#####..##
#..#.#.##
#####.#..

.#.######.#.##.#.
..#.####.#..##..#
#..........####..
#.########.#..#.#
.####..####.##.##
#.##....##.####.#
#..#....#..#..#..
.##......##....##
...##..##...##...
#.########.####.#
##..#..#..##..##.
##.#.##.####..###
....#..#....##...

##.#....#
...##...#
...##..##
##.......
.....##..
..#..##..
..##....#
..#..##..
####....#

###.#..#...
#....##.#..
##..#...#..
.....###...
.#...#..###
.##.#.#.#..
.####..##..
..####..###
#.#.#.##...
##.#.#.....
####.###...
########...
##.#.#.....

#.#.###
.#...##
######.
##.##..
.##.#..
...##..
....###
##.##..
##.##..
....###
...##..

.####.###..
#..#....#..
.#...###..#
...##.#....
...##.###..
#.##.....##
#.####.##..
####..###..
####.##.#..
.##.#..#.##
#.#..###...
......###..
......###..
#.#..###...
.##.#..#.##

....####.
####..#.#
.......#.
.....#..#
....#.#.#
####.##.#
####..#.#
.....####
####.##.#
#####..#.
#..###...

...#..#..##..#.
#...##.######.#
.#.###...##...#
.#.#....####...
.......#....#..
..###..######..
.#.####.#..#.##
.#..###########
..#.#####..####
..###.###..###.
..###.###..###.
..#.#####..####
.#..###########
.#.#.##.#..#.##
..###..######..
.......#....#..
.#.#....####...

..##...####
.....#..#.#
..##..#.#.#
.#.####..#.
##.#....###
##.#....###
.#.####..#.
...#..#.#.#
.....#..#.#
..##...####
....#.#####
...#....##.
...#....##.

#..####...##..#
#####.##.##....
.##.##.#.##.###
.##.##.#.##.###
#####.##.##....
#..####...##..#
####......##...
......#.##.###.
....#...###.##.
####...#.#.#..#
.##.#..###..#.#
.####.##.##.#.#
####.########.#

#####..#.##
.##....#...
..#.#.##.##
######..#..
#..#####..#
#..#####..#
######..#..

#..######.#....
####....#..##.#
####....#..##.#
#..######.#....
.#...#####..#..
#...####...#.#.
##...#.#...#..#
.##.##.#.....#.
..#..##....##..
..#.....#..##.#
##...#...#####.
##...#...#####.
..#..#..#..##.#`;

const test2 = `
##.#....#
...##...#
...##..##
##.......
.....##..
..#..##..
..##....#
..#..##..
####....#`;

function alts(maze) {
  const alts = maze
    .split("")
    .map((c, idx) => {
      if (c === "\n") return "";
      const replacement = c === "." ? "#" : ".";
      return maze.slice(0, idx) + replacement + maze.slice(idx + 1);
    })
    .filter((m) => !!m);
  return alts;
}

const mazes = raw.split("\n\n").map((t) => alts(t));
let res = 0;
mazes.forEach((mazess) => {
  const mazes = mazess.map((maze) =>
    maze.split("\n").map((row) => row.split(""))
  );
  
  const doubles = mazes.map((maze) => {
    function getSteps(maze) {
      const doubles = [];
      maze.forEach((r, y) => {
        if (y === 0) return; // Don't check the first row
        const row = r.join("");
        const lastRow = maze[y - 1].join("");
        if (row === lastRow) doubles.push([y, y - 1]);
      });

      function countSteps(a, b, maze) {
        if (a === maze.length || b < 0) {
          return 0;
        }
        if (a === maze.length) return 0;
        if (b < 0) return 0;
        const rowA = maze[a].join("");
        const rowB = maze[b].join("");
        if (rowA === rowB) return countSteps(a + 1, b - 1, maze) + 1;
        return 0;
      }

      let bestDoubles = [];
      doubles.forEach((d) => {
        const steps = countSteps(d[0], d[1], maze);
        if (d[1] + 1 - steps === 0 || d[1] + steps === maze.length - 1) {
          bestDoubles.push(d);
        }
      });
      return { bestDoubles, maze };
    }

    const horizontal = getSteps(maze);
    const vertical = getSteps(maze[0].map((_, i) => maze.map((row) => row[i])));

    return { horizontal, vertical };
  });
  const horizontalDoublesCount = {};
  const verticalDoublesCount = {};
  doubles.forEach((d) => {
    d.horizontal.bestDoubles.forEach((d) => { 
      const key = '' + d[0] + d[1]; 
      horizontalDoublesCount[key] = horizontalDoublesCount[key] ? horizontalDoublesCount[key] + 1 : 1; }
    );
    d.vertical.bestDoubles.forEach((d) => { 
      const key = '' + d[0] + d[1]; 
      verticalDoublesCount[key] = verticalDoublesCount[key] ? verticalDoublesCount[key] + 1 : 1; }
    );
  });
  Object.entries(horizontalDoublesCount).forEach(([key, value]) => {
    if (value === 2) {
      const values = key.length === 2 ? key.split("") : key.length === 3 ? [key[0] + key[1], key[2]] : [key[0] + key[1], key[2] + key[3]];
      res = res + Number(values[0]) * 100;
    }
  });
  Object.entries(verticalDoublesCount).forEach(([key, value]) => {
    if (value === 2) {
      const values = key.length === 2 ? key.split("") : key.length === 3 ? [key[0] + key[1], key[2]] : [key[0] + key[1], key[2] + key[3]];
      res = res + Number(values[0]);
    }
  });
});
console.log(res);
